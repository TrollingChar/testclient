package hz.company.testclient.bf.weapons;

/**
 * ...
 * @author 
 */
class WPoisonArrow extends Weapon
{

	public function new(/*worm:Worm*/) 
	{
		super(worm);
		constpower = true;
		shots = 2;
		recharge = 50;
	}
	
	override function loadWeapon() {
		mc = new CrossbowMC();
	}
		
	override function updateWeapon() {
		updateAimedWeapon();
	}
		
	override public function update() {
		if(map.st.sp) disable(); else super.update();
	}
		
	override function onShoot() {			
		map.activeTeam.arsenal.useAmmo('poison arrow');
		map.updateArsenal();
			
		var blt:PoisonArrow = new PoisonArrow(worm.x, worm.y, map.st.x, map.st.y);
		new Shot().play();
		blt.addTo(map);
	}
		
	override function onStopShooting() {
		super.onStopShooting();
		if(!map.activeTeam.arsenal.getAmmo('poison arrow')) disable();
	}
}